# E2Eテストケース (Playwright)

## 目的
公開ユーザー向けの主要フロー(リスト閲覧・検索・並び替え・詳細遷移・ログイン画面導線)を自動E2Eで担保する。

## ツール
- Playwright

## 実行方法
```
cd front
npm run test:e2e
```

※ 初回はブラウザをインストールするため `npx playwright install` を実行。

## テスト方針
- 公開ユーザーの閲覧体験を優先的に自動化
- 管理者操作(追加/編集/削除)はOAuthが必要なため現状はE2E対象外
- /api/videos はE2E内でモックし、DB依存を排除

## E2Eケース
### 1. リスト表示
- トップページを開くと「コレクション」見出しが表示される
- モックされた動画カードが表示される

### 2. 詳細遷移
- リストのカードをクリックすると詳細画面へ遷移
- 詳細画面にタイトルと「YouTube を開く」リンクが表示される
- 「コレクションへ」でリストに戻れる

### 3. 検索
- 検索欄にキーワードを入力すると該当カードのみが表示される

### 4. 並び替え
- 「高評価順」を選択すると、評価の高い動画が先頭に表示される

### 5. ログイン導線
- ヘッダーのログインアイコンからログイン画面へ遷移できる
- ログイン画面に「Googleでログイン」ボタンが表示される

### 6. 空リスト(準正常系)
- /api/videos が空配列でも画面が崩れずリストが空で表示される

### 7. 公開日未設定(準正常系)
- publishDate が null の動画を詳細で開くと「公開日未設定」が表示される

### 8. API失敗(異常系)
- /api/videos が 500 を返した場合、「データの取得に失敗しました。」が表示される

### 9. APIタイムアウト(異常系)
- /api/videos のリクエストがタイムアウトした場合、「データの取得に失敗しました。」が表示される
